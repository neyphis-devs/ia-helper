### Full Documentation of the "AI Assistant" Plugin

#### Description

The **AI Assistant** plugin is designed to provide automated support to users when a ticket is opened. It uses the OpenAI API to generate automatic responses based on user messages. If the assistant cannot resolve the issue, it transfers the conversation to a staff member.

---

### Configuration

#### Configuration Files

1. **config.json**
   This file contains the main plugin settings.

```json
{
    "enabled": true,
    "apiKey": "YOUR_OPENAI_API_KEY",
    "assistantKey": "YOUR_ASSISTANT_KEY",
    "confidenceThreshold": 0.6,
    "language": "en",
    "staffRoleId": "STAFF_ROLE_ID",
    "devRoleId": "DEV_ROLE_ID",
    "maxIAMessages": 10
}
```

* `enabled`: Enables or disables the plugin.
* `apiKey`: OpenAI API key for access.
* `assistantKey`: Assistant ID used by OpenAI.
* `confidenceThreshold`: Minimum confidence level required for responses.
* `language`: Default language of the assistant (`en` for English, `fr` for French, etc.).
* `staffRoleId`: Discord role ID for staff.
* `devRoleId`: Discord role ID for developers.
* `maxIAMessages`: Maximum number of AI-generated messages before handing off the conversation.

2. **prompts.json**
   This file contains the prompts used by the AI assistant.

```json
{
    "question": "You are an AI assistant answering user questions.",
    "default": "You are a general-purpose AI assistant."
}
```

* `question`: Prompt used for specific questions.
* `default`: Default prompt for general responses.

3. **panels.json**
   This file configures the interaction panels.

```json
[
    {
        "id": "example-embed",
        "name": "Example Embed",
        "dropdown": false,
        "options": ["question"],
        "enableIA": true,
        "embed": {
            "enabled": true,
            "title": "Tickets:",
            "description": "Create a ticket by clicking one of the buttons below!",
            "customColor": "#f8ab00",
            "url": "https://openticket.dj-dj.be",
            "image": "https://www.example.com/image.png",
            "thumbnail": "https://www.example.com/image.png",
            "footer": "Open Ticket v4.0.5",
            "fields": [
                { "name": "field name", "value": "field value", "inline": false }
            ],
            "timestamp": false
        },
        "settings": {
            "dropdownPlaceholder": "Create a ticket!",
            "enableMaxTicketsWarningInText": false,
            "enableMaxTicketsWarningInEmbed": true,
            "describeOptionsLayout": "simple",
            "describeOptionsCustomTitle": "",
            "describeOptionsInText": false,
            "describeOptionsInEmbedFields": true,
            "describeOptionsInEmbedDescription": false
        }
    }
]
```

* `enableIA`: Enables or disables the AI assistant for this panel.
* `embed`: Embed configuration displayed in the ticket.

4. **languages.json**
   This file contains translated messages for different languages.

```json
{
    "fr": {
        "welcome": "ü§ñ Bonjour ! Je suis l'assistant IA. D√®s que vous aurez expliqu√© votre souci, je tenterai de vous aider automatiquement !",
        "transferred": "‚ùå Je ne peux pas vous aider davantage. {{staffRole}}, merci de prendre le relais !",
        "failure": "‚ö†Ô∏è L'assistant n'a pas pu terminer correctement. {{devRole}}, merci d'intervenir.",
        "error": "‚ö†Ô∏è Une erreur est survenue. {{devRole}}, merci d'intervenir."
    },
    "en": {
        "welcome": "ü§ñ Hello! I‚Äôm the AI assistant. Once you explain your issue, I‚Äôll try to help you automatically!",
        "transferred": "‚ùå I can't help you further. {{staffRole}}, please take over!",
        "failure": "‚ö†Ô∏è The assistant could not finish successfully. {{devRole}}, please assist.",
        "error": "‚ö†Ô∏è An error occurred. {{devRole}}, please assist."
    }
}
```

---

### Features

1. **Automatic Response**

   * The AI assistant automatically replies to user messages using the OpenAI API.
   * Responses are based on the prompts defined in `prompts.json`.

2. **Message Limit**

   * The number of messages generated by the AI is limited by the `maxIAMessages` setting. Once this limit is reached, the conversation is handed over to staff.

3. **Staff Handoff**

   * If the AI cannot answer or a problem occurs, the conversation is transferred to the role defined by `staffRoleId`.

4. **Error Handling**

   * In case of an error, a message is sent to the role defined by `devRoleId`.

---

### Usage

1. **Installation**

   * Place the plugin files in the `ia-helper` folder.
   * Make sure the required dependencies (like `openai`) are installed.

2. **Activation**

   * Enable the plugin by setting `"enabled": true` in `config.json`.

3. **Configuration**

   * Edit the `config.json`, `prompts.json`, and `panels.json` files as needed.

4. **Startup**

   * Start the bot. The plugin will automatically load and be ready to respond to tickets.

---

### Example Flow

1. A user opens a ticket.
2. The AI assistant sends a welcome message (defined in `languages.json`).
3. The user asks a question.
4. The AI generates a response based on the relevant prompt.
5. If the AI reaches the message limit or cannot help, the conversation is transferred to staff.

---

### Dependencies

* **OpenAI**: Used to generate AI responses.
* **Discord.js**: Used to interact with the Discord API.

---

### Author

* **Name**: NEYPHIS
* **Version**: 1.0.0
* **Description**: AI assistant plugin for tickets.
* **Tags**: `ai`, `gpt`, `assistant`, `auto-response`

---

If you have any questions or issues, please contact the developer or refer to the official documentation.
